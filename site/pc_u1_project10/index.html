<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Project 10: Ultrasonic Sensor - Physical Computing - The Basics</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Project 10: Ultrasonic Sensor";
        var mkdocs_page_input_path = "pc_u1_project10.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Physical Computing - The Basics
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">About</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../partList/">Part List</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../pc_l0/">Lesson 0 - Setting up</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Lesson 1 - Digital Output</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_project1/">Project 1: Blink an LED</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_project2/">Project 2: Blinking the LEDs in sequences</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_project3/">Project 3: LED and Resistors</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_lesson1_quiz/">End of Lesson 1 Quiz</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Lesson 2 - Analogue Output</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_project4/">Project 4: Fading LED</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Lesson 3 - Digital Input</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_project5/">Project 5: Button</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Lesson 4 - Melody Tone</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_project6/">Project 6: Compose Basic Tone</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_project7/">Project 7: Compose Melody</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Lesson 5 - Analogue Input</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_project8/">Project 8: Potentiometer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_project9/">Project 9: IR Sensor</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Project 10: Ultrasonic Sensor</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#installing-the-upload-mode-broadcast-extension">Installing the Upload Mode Broadcast extension.</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#getting-the-data-from-the-ultrasonic-sensor">Getting the data from the Ultrasonic Sensor.</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#explanation">Explanation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#performing-a-conditional-statement">Performing a conditional statement</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pc_u1_project11/">Project 11: Musical Distance Detector</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Physical Computing - The Basics</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Lesson 5 - Analogue Input</li>
      <li class="breadcrumb-item active">Project 10: Ultrasonic Sensor</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="project-10-ultrasonic-sensor">Project 10: Ultrasonic Sensor</h1>
<p>Objective: To program the microcontroller to read value from an ultrasonic sensor to detect distances.</p>
<p>Before we begin, switch to <strong>Upload Mode</strong></p>
<p><img alt="" src="../images/toggle_UploadMode.jpg" /></p>
<h2 id="installing-the-upload-mode-broadcast-extension">Installing the Upload Mode Broadcast extension.</h2>
<ol>
<li>
<p>Construct the circuit below. You may use a breadboard if you like.</p>
<ul>
<li>VCC  ➡️  5V</li>
<li>Trig ➡️  Digital Pin 12</li>
<li>Echo ➡️  Digital Pin 11</li>
<li>Gnd  ➡️  Gnd</li>
</ul>
<p><img alt="" src="../images/p10_circuit.png" /></p>
<p>Ultrasonic sensors emit high-frequency sound waves and measure the time it takes for the sound to bounce back from an object. This allows us to calculate the distance between the sensor and the object. In this project, we'll use this concept to create a musical distance detector!</p>
</li>
<li>
<p>Then, we must install the extension <strong>Upload Mode Broadcast</strong> in mBlock 5 in the <strong>Devices</strong> tab.</p>
<p>Make sure the devices tab is selected.</p>
<p><img alt="" src="../images/tabDevices.jpg" /></p>
<p>Then, at the bottom of the screen, click the <strong>extension</strong> <img alt="" src="../images/btn_extension.png" /> button.</p>
<p><img alt="" src="../images/p10_instruction1.png" /></p>
</li>
<li>
<p>Search for <strong>Upload Mode Broadcast</strong>. Then look for the extension and click <strong>+ Add</strong>.</p>
<p><img alt="" src="../images/p10_instruction2.png" /></p>
<p>Once you added the extensions, you will see a new section from your coding toolbox.</p>
<p><img alt="" src="../images/p10_instruction3.png" /></p>
</li>
<li>
<p>Next, we will also install the <strong>Upload Mode Broadcast</strong> for the <strong>Sprites</strong> tab.</p>
<p>Click the <strong>Sprite</strong> tab. <img alt="" src="../images/tabSprites.jpg" /></p>
</li>
<li>
<p>Click the Extensions button <img alt="" src="../images/btn_extension.png" />.</p>
<p>Then add the <strong>Upload Mode Broadcast</strong>.</p>
</li>
</ol>
<h3 id="remember">Remember</h3>
<p>The <strong>Devices</strong> and <strong>Sprites</strong> tab each have their own coding workspace.</p>
<p>The code in <strong>Devices</strong> tab will only work in the <strong>Devices</strong> section.
The code in <strong>Sprites</strong> tab will only work in <strong>Sprites</strong> section.</p>
<p>Now we are going to code the microcontroller to:</p>
<ul>
<li>
<p><em>Receive</em> distance data from the ultrasonic sensor into the microcontroller (Devices tab), and</p>
</li>
<li>
<p><em>Broadcast</em> (send) it to the Panda (Sprite tab) to display the distance.</p>
</li>
</ul>
<h2 id="getting-the-data-from-the-ultrasonic-sensor">Getting the data from the Ultrasonic Sensor.</h2>
<ol>
<li>
<p>Switch to the <strong>Devices</strong> tab and enter the code below.</p>
<p><img alt="" src="../images/p10_instruction6.png" /></p>
</li>
<li>
<p>Click the <img alt="upload" src="../images/btnUpload.jpg" /> button to upload the code to the microcontroller.</p>
</li>
<li>
<p>Next, switch to the <strong>Sprites</strong> tab and enter the code below.</p>
<p><img alt="" src="../images/p10_instruction7.png" /></p>
</li>
<li>
<p>Then, press <img alt="the Green Flag" src="../images/btnGreenFlag.jpg" />. You should be able to see the distance displayed on the Panda.</p>
<p><img alt="" src="../images/p10_instruction8.png" /></p>
</li>
</ol>
<h2 id="explanation">Explanation</h2>
<p>In mBlock, the <strong>sprite</strong> and <strong>device</strong> sections each have their own coding tools.</p>
<p>The device section connects to the microcontroller and reads the distance data from the ultrasonic sensor.</p>
<p>This distance information is then sent directly to the sprite section.</p>
<p><img alt="" src="../images/p10_instruction9.png" /></p>
<p>The panda (which is a sprite) receives the distance message and displays it on the screen using the "say" block.</p>
<h2 id="performing-a-conditional-statement">Performing a conditional statement</h2>
<ol>
<li>
<p>Now let's create a variable name <em>distance</em>.</p>
<p>Select <img alt="**Variables**" src="../images/btn_Variable.png" />.</p>
<p>Then click <img alt="**Make a Variable**" src="../images/btn_MakeAVariable.png" />.</p>
<p>Set the new variable name to <em>distance</em> and click <strong>OK</strong>.</p>
<p><img alt="" src="../images/p10_instruction10.png" /></p>
</li>
<li>
<p>Now we will assign a value to the variable.</p>
<p>Switch to <strong>Sprites</strong> tab.</p>
<p>Delete the previous code and replace it with this code.</p>
<p><img alt="" src="../images/p10_instruction11.png" /></p>
</li>
<li>
<p>Press the <img alt="Green flag" src="../images/btnGreenFlag.jpg" />.</p>
<p>Then use the palm of your hand and place it close to the ultrasonic sensor and far away.</p>
<p>The panda should say "too far" when your hand is far away from the sensor and "too close" when your hand is close to the sensor.</p>
</li>
</ol>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../pc_u1_project9/" class="btn btn-neutral float-left" title="Project 9: IR Sensor"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../pc_u1_project11/" class="btn btn-neutral float-right" title="Project 11: Musical Distance Detector">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../pc_u1_project9/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../pc_u1_project11/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
